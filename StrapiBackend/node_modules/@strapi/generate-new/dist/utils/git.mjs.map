{"version":3,"file":"git.mjs","sources":["../../src/utils/git.ts"],"sourcesContent":["import execa from 'execa';\n\nasync function isInGitRepository(rootDir: string) {\n  try {\n    await execa('git', ['rev-parse', '--is-inside-work-tree'], { stdio: 'ignore', cwd: rootDir });\n    return true;\n  } catch (_) {\n    return false;\n  }\n}\n\nasync function isInMercurialRepository(rootDir: string) {\n  try {\n    await execa('hg', ['-cwd', '.', 'root'], { stdio: 'ignore', cwd: rootDir });\n    return true;\n  } catch (_) {\n    return false;\n  }\n}\n\nexport default async function tryGitInit(rootDir: string) {\n  try {\n    await execa('git', ['--version'], { stdio: 'ignore' });\n    if ((await isInGitRepository(rootDir)) || (await isInMercurialRepository(rootDir))) {\n      return false;\n    }\n\n    await execa('git', ['init'], { stdio: 'ignore', cwd: rootDir });\n\n    return true;\n  } catch (_) {\n    return false;\n  }\n}\n"],"names":[],"mappings":";AAEA,eAAe,kBAAkB,SAAiB;AAC5C,MAAA;AACI,UAAA,MAAM,OAAO,CAAC,aAAa,uBAAuB,GAAG,EAAE,OAAO,UAAU,KAAK,QAAS,CAAA;AACrF,WAAA;AAAA,WACA,GAAG;AACH,WAAA;AAAA,EACT;AACF;AAEA,eAAe,wBAAwB,SAAiB;AAClD,MAAA;AACF,UAAM,MAAM,MAAM,CAAC,QAAQ,KAAK,MAAM,GAAG,EAAE,OAAO,UAAU,KAAK,QAAS,CAAA;AACnE,WAAA;AAAA,WACA,GAAG;AACH,WAAA;AAAA,EACT;AACF;AAEA,eAA8B,WAAW,SAAiB;AACpD,MAAA;AACI,UAAA,MAAM,OAAO,CAAC,WAAW,GAAG,EAAE,OAAO,UAAU;AACrD,QAAK,MAAM,kBAAkB,OAAO,KAAO,MAAM,wBAAwB,OAAO,GAAI;AAC3E,aAAA;AAAA,IACT;AAEM,UAAA,MAAM,OAAO,CAAC,MAAM,GAAG,EAAE,OAAO,UAAU,KAAK,QAAA,CAAS;AAEvD,WAAA;AAAA,WACA,GAAG;AACH,WAAA;AAAA,EACT;AACF;"}