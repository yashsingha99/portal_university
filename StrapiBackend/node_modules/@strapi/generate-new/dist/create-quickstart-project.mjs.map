{"version":3,"file":"create-quickstart-project.mjs","sources":["../src/create-quickstart-project.ts"],"sourcesContent":["import execa from 'execa';\nimport { trackUsage, captureStderr } from './utils/usage';\nimport defaultConfigs from './utils/db-configs.js';\nimport clientDependencies from './utils/db-client-dependencies.js';\nimport createProject from './create-project';\nimport type { Configuration, Scope } from './types';\n\nexport default async function createQuickStartProject(scope: Scope) {\n  console.log('Creating a quickstart project.');\n  await trackUsage({ event: 'didChooseQuickstart', scope });\n\n  // get default sqlite config\n  const client = 'sqlite';\n  const configuration: Configuration = {\n    client,\n    connection: defaultConfigs[client],\n    dependencies: { ...clientDependencies({ client }), ...scope.additionalsDependencies },\n  };\n\n  await createProject(scope, configuration);\n\n  if (scope.runQuickstartApp !== true) return;\n\n  console.log(`Running your Strapi application.`);\n\n  try {\n    await trackUsage({ event: 'willStartServer', scope });\n\n    await execa('npm', ['run', 'develop'], {\n      stdio: 'inherit',\n      cwd: scope.rootPath,\n      env: {\n        FORCE_COLOR: '1',\n      },\n    });\n  } catch (error) {\n    if (typeof error === 'string' || error instanceof Error) {\n      await trackUsage({\n        event: 'didNotStartServer',\n        scope,\n        error,\n      });\n\n      await captureStderr('didNotStartServer', error);\n    }\n    process.exit(1);\n  }\n}\n"],"names":[],"mappings":";;;;;AAOA,eAA8B,wBAAwB,OAAc;AAClE,UAAQ,IAAI,gCAAgC;AAC5C,QAAM,WAAW,EAAE,OAAO,uBAAuB,MAAO,CAAA;AAGxD,QAAM,SAAS;AACf,QAAM,gBAA+B;AAAA,IACnC;AAAA,IACA,YAAY,eAAe,MAAM;AAAA,IACjC,cAAc,EAAE,GAAG,mBAAmB,EAAE,QAAQ,GAAG,GAAG,MAAM,wBAAwB;AAAA,EAAA;AAGhF,QAAA,cAAc,OAAO,aAAa;AAExC,MAAI,MAAM,qBAAqB;AAAM;AAErC,UAAQ,IAAI,kCAAkC;AAE1C,MAAA;AACF,UAAM,WAAW,EAAE,OAAO,mBAAmB,MAAO,CAAA;AAEpD,UAAM,MAAM,OAAO,CAAC,OAAO,SAAS,GAAG;AAAA,MACrC,OAAO;AAAA,MACP,KAAK,MAAM;AAAA,MACX,KAAK;AAAA,QACH,aAAa;AAAA,MACf;AAAA,IAAA,CACD;AAAA,WACM,OAAO;AACd,QAAI,OAAO,UAAU,YAAY,iBAAiB,OAAO;AACvD,YAAM,WAAW;AAAA,QACf,OAAO;AAAA,QACP;AAAA,QACA;AAAA,MAAA,CACD;AAEK,YAAA,cAAc,qBAAqB,KAAK;AAAA,IAChD;AACA,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF;"}