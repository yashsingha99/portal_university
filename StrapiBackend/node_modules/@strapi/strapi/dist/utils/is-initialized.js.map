{"version":3,"file":"is-initialized.js","sources":["../../src/utils/is-initialized.ts"],"sourcesContent":["import { isEmpty, isNil } from 'lodash/fp';\n\nimport type { Strapi } from '@strapi/types';\n\n/**\n * Test if the strapi application is considered as initialized (1st user has been created)\n */\nexport default async function isInitialized(strapi: Strapi): Promise<boolean> {\n  try {\n    if (isEmpty(strapi.admin)) {\n      return true;\n    }\n\n    // test if there is at least one admin\n    const anyAdministrator = await strapi.query('admin::user').findOne({ select: ['id'] });\n\n    return !isNil(anyAdministrator);\n  } catch (err) {\n    strapi.stopWithError(err);\n  }\n}\n"],"names":["isEmpty","isNil"],"mappings":";;AAOA,eAA8B,cAAc,QAAkC;AACxE,MAAA;AACE,QAAAA,EAAA,QAAQ,OAAO,KAAK,GAAG;AAClB,aAAA;AAAA,IACT;AAGA,UAAM,mBAAmB,MAAM,OAAO,MAAM,aAAa,EAAE,QAAQ,EAAE,QAAQ,CAAC,IAAI,EAAG,CAAA;AAE9E,WAAA,CAACC,EAAAA,MAAM,gBAAgB;AAAA,WACvB,KAAK;AACZ,WAAO,cAAc,GAAG;AAAA,EAC1B;AACF;;"}