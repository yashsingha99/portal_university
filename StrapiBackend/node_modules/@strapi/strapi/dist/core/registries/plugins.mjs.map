{"version":3,"file":"plugins.mjs","sources":["../../../src/core/registries/plugins.ts"],"sourcesContent":["import { has } from 'lodash/fp';\n\nimport type { Strapi, Common } from '@strapi/types';\n\ntype PluginMap = Record<string, Common.Plugin>;\n\nconst pluginsRegistry = (strapi: Strapi) => {\n  const plugins: PluginMap = {};\n\n  return {\n    get(name: string) {\n      return plugins[name];\n    },\n    getAll() {\n      return plugins;\n    },\n    add(name: string, pluginConfig: Common.Plugin) {\n      if (has(name, plugins)) {\n        throw new Error(`Plugin ${name} has already been registered.`);\n      }\n\n      const pluginModule = strapi.container.get('modules').add(`plugin::${name}`, pluginConfig);\n      plugins[name] = pluginModule;\n\n      return plugins[name];\n    },\n  };\n};\n\nexport default pluginsRegistry;\n"],"names":[],"mappings":";AAMM,MAAA,kBAAkB,CAAC,WAAmB;AAC1C,QAAM,UAAqB,CAAA;AAEpB,SAAA;AAAA,IACL,IAAI,MAAc;AAChB,aAAO,QAAQ,IAAI;AAAA,IACrB;AAAA,IACA,SAAS;AACA,aAAA;AAAA,IACT;AAAA,IACA,IAAI,MAAc,cAA6B;AACzC,UAAA,IAAI,MAAM,OAAO,GAAG;AACtB,cAAM,IAAI,MAAM,UAAU,IAAI,+BAA+B;AAAA,MAC/D;AAEM,YAAA,eAAe,OAAO,UAAU,IAAI,SAAS,EAAE,IAAI,WAAW,IAAI,IAAI,YAAY;AACxF,cAAQ,IAAI,IAAI;AAEhB,aAAO,QAAQ,IAAI;AAAA,IACrB;AAAA,EAAA;AAEJ;"}