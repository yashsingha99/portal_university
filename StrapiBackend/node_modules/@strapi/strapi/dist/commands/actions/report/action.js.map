{"version":3,"file":"action.js","sources":["../../../../src/commands/actions/report/action.ts"],"sourcesContent":["import { EOL } from 'os';\nimport strapi from '../../../Strapi';\n\ninterface CmdOptions {\n  uuid: boolean;\n  dependencies: boolean;\n  all: boolean;\n}\n\nexport default async ({ uuid, dependencies, all }: CmdOptions) => {\n  const config = {\n    reportUUID: Boolean(all || uuid),\n    reportDependencies: Boolean(all || dependencies),\n  };\n\n  const appContext = await strapi.compile();\n  const app = await strapi(appContext).register();\n\n  let debugInfo = `Launched In: ${Date.now() - app.config.launchedAt} ms\nEnvironment: ${app.config.environment}\nOS: ${process.platform}-${process.arch}\nStrapi Version: ${app.config.info.strapi}\nNode/Yarn Version: ${process.env.npm_config_user_agent}\nEdition: ${app.EE ? 'Enterprise' : 'Community'}\nDatabase: ${app?.config?.database?.connection?.client ?? 'unknown'}`;\n\n  if (config.reportUUID) {\n    debugInfo += `${EOL}UUID: ${app.config.uuid}`;\n  }\n\n  if (config.reportDependencies) {\n    debugInfo += `${EOL}Dependencies: ${JSON.stringify(app.config.info.dependencies, null, 2)}\nDev Dependencies: ${JSON.stringify(app.config.info.devDependencies, null, 2)}`;\n  }\n\n  console.log(debugInfo);\n\n  await app.destroy();\n};\n"],"names":["strapi","EOL"],"mappings":";;;AASA,MAAe,SAAA,OAAO,EAAE,MAAM,cAAc,UAAsB;AAChE,QAAM,SAAS;AAAA,IACb,YAAY,QAAQ,OAAO,IAAI;AAAA,IAC/B,oBAAoB,QAAQ,OAAO,YAAY;AAAA,EAAA;AAG3C,QAAA,aAAa,MAAMA,OAAO;AAChC,QAAM,MAAM,MAAMA,OAAO,UAAU,EAAE,SAAS;AAE9C,MAAI,YAAY,gBAAgB,KAAK,QAAQ,IAAI,OAAO,UAAU;AAAA,eACrD,IAAI,OAAO,WAAW;AAAA,MAC/B,QAAQ,QAAQ,IAAI,QAAQ,IAAI;AAAA,kBACpB,IAAI,OAAO,KAAK,MAAM;AAAA,qBACnB,QAAQ,IAAI,qBAAqB;AAAA,WAC3C,IAAI,KAAK,eAAe,WAAW;AAAA,YAClC,KAAK,QAAQ,UAAU,YAAY,UAAU,SAAS;AAEhE,MAAI,OAAO,YAAY;AACrB,iBAAa,GAAGC,MAAG,SAAS,IAAI,OAAO,IAAI;AAAA,EAC7C;AAEA,MAAI,OAAO,oBAAoB;AAChB,iBAAA,GAAGA,GAAAA,GAAG,iBAAiB,KAAK,UAAU,IAAI,OAAO,KAAK,cAAc,MAAM,CAAC,CAAC;AAAA,oBACzE,KAAK,UAAU,IAAI,OAAO,KAAK,iBAAiB,MAAM,CAAC,CAAC;AAAA,EAC1E;AAEA,UAAQ,IAAI,SAAS;AAErB,QAAM,IAAI;AACZ;;"}