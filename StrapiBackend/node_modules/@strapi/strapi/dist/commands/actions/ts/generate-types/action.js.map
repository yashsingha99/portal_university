{"version":3,"file":"action.js","sources":["../../../../../src/commands/actions/ts/generate-types/action.ts"],"sourcesContent":["import tsUtils from '@strapi/typescript-utils';\nimport strapi from '../../../../Strapi';\n\ninterface CmdOptions {\n  debug?: boolean;\n  silent?: boolean;\n  verbose?: boolean;\n  outDir?: string;\n}\n\nexport default async ({ debug, silent, verbose, outDir }: CmdOptions) => {\n  if ((debug || verbose) && silent) {\n    console.error('Flags conflict: both silent and debug mode are enabled, exiting...');\n    process.exit(1);\n  }\n\n  const appContext = await strapi.compile({ ignoreDiagnostics: true });\n  const app = await strapi(appContext).register();\n\n  await tsUtils.generators.generate({\n    strapi: app,\n    pwd: appContext.appDir,\n    rootDir: outDir ?? undefined,\n    logger: {\n      silent,\n      // TODO V5: verbose is deprecated and should be removed\n      debug: debug || verbose,\n    },\n    artifacts: { contentTypes: true, components: true },\n  });\n\n  await app.destroy();\n};\n"],"names":["strapi","tsUtils"],"mappings":";;;;;AAUA,MAAe,SAAA,OAAO,EAAE,OAAO,QAAQ,SAAS,aAAyB;AAClE,OAAA,SAAS,YAAY,QAAQ;AAChC,YAAQ,MAAM,oEAAoE;AAClF,YAAQ,KAAK,CAAC;AAAA,EAChB;AAEA,QAAM,aAAa,MAAMA,OAAO,QAAQ,EAAE,mBAAmB,MAAM;AACnE,QAAM,MAAM,MAAMA,OAAO,UAAU,EAAE,SAAS;AAExC,QAAAC,iBAAA,QAAQ,WAAW,SAAS;AAAA,IAChC,QAAQ;AAAA,IACR,KAAK,WAAW;AAAA,IAChB,SAAS,UAAU;AAAA,IACnB,QAAQ;AAAA,MACN;AAAA;AAAA,MAEA,OAAO,SAAS;AAAA,IAClB;AAAA,IACA,WAAW,EAAE,cAAc,MAAM,YAAY,KAAK;AAAA,EAAA,CACnD;AAED,QAAM,IAAI;AACZ;;"}