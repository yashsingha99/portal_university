{"version":3,"file":"constants-BSb1Fhp_.js","sources":["../../ee/admin/src/content-manager/pages/ListView/components/AssigneeFilter.tsx","../../ee/admin/src/content-manager/pages/ListView/components/StageFilter.tsx","../../ee/admin/src/content-manager/pages/ListView/constants.ts"],"sourcesContent":["import { Combobox, ComboboxOption, ComboboxProps } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { getDisplayName } from '../../../../../../../admin/src/content-manager/utils/users';\nimport { useAdminUsers } from '../../../../../../../admin/src/services/users';\n\ninterface AssigneeFilterProps extends Pick<ComboboxProps, 'value' | 'onChange'> {}\n\nconst AssigneeFilter = ({ value, onChange }: AssigneeFilterProps) => {\n  const { formatMessage } = useIntl();\n  const { data, isLoading } = useAdminUsers();\n  const users = data?.users || [];\n\n  return (\n    <Combobox\n      value={value}\n      aria-label={formatMessage({\n        id: 'content-manager.components.Filters.usersSelect.label',\n        defaultMessage: 'Search and select an user to filter',\n      })}\n      onChange={onChange}\n      loading={isLoading}\n    >\n      {users.map((user) => {\n        return (\n          <ComboboxOption key={user.id} value={user.id.toString()}>\n            {getDisplayName(user, formatMessage)}\n          </ComboboxOption>\n        );\n      })}\n    </Combobox>\n  );\n};\n\nexport { AssigneeFilter };\nexport type { AssigneeFilterProps };\n","import {\n  Flex,\n  Loader,\n  SingleSelect,\n  SingleSelectOption,\n  SingleSelectProps,\n  Typography,\n} from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { useReviewWorkflows } from '../../../../pages/SettingsPage/pages/ReviewWorkflows/hooks/useReviewWorkflows';\nimport { getStageColorByHex } from '../../../../pages/SettingsPage/pages/ReviewWorkflows/utils/colors';\n\ninterface StageFilterProps extends Pick<SingleSelectProps, 'value' | 'onChange'> {\n  uid?: string;\n}\n\nconst StageFilter = ({ value, onChange, uid }: StageFilterProps) => {\n  const { formatMessage } = useIntl();\n  const { workflows, isLoading } = useReviewWorkflows({ filters: { contentTypes: uid } });\n\n  const [workflow] = workflows ?? [];\n\n  return (\n    <SingleSelect\n      aria-label={formatMessage({\n        id: 'content-manager.components.Filters.reviewWorkflows.label',\n        defaultMessage: 'Search and select an workflow stage to filter',\n      })}\n      value={value}\n      onChange={onChange}\n      loading={isLoading}\n      // @ts-expect-error â€“ DS type error with SingleSelect['customizeContent']\n      customizeContent={() => (\n        <Flex as=\"span\" justifyContent=\"space-between\" alignItems=\"center\" width=\"100%\">\n          <Typography textColor=\"neutral800\" ellipsis>\n            {value}\n          </Typography>\n          {isLoading ? <Loader small style={{ display: 'flex' }} /> : null}\n        </Flex>\n      )}\n    >\n      {(workflow?.stages ?? []).map(({ id, color, name }) => {\n        const { themeColorName } = getStageColorByHex(color) ?? {};\n\n        return (\n          <SingleSelectOption\n            key={id}\n            startIcon={\n              <Flex\n                height={2}\n                background={color}\n                borderColor={themeColorName === 'neutral0' ? 'neutral150' : undefined}\n                hasRadius\n                shrink={0}\n                width={2}\n              />\n            }\n            value={name}\n          >\n            {name}\n          </SingleSelectOption>\n        );\n      })}\n    </SingleSelect>\n  );\n};\n\nexport { StageFilter };\nexport type { StageFilterProps };\n","import { getTranslation } from '../../../../../../admin/src/content-manager/utils/translations';\nimport { ASSIGNEE_ATTRIBUTE_NAME, STAGE_ATTRIBUTE_NAME } from '../EditView/components/constants';\n\nimport { AssigneeFilter } from './components/AssigneeFilter';\nimport { StageFilter } from './components/StageFilter';\n\nimport type { TableHeader } from '../../../../../../admin/src/content-manager/pages/ListView/ListViewPage';\nimport type { FilterData } from '@strapi/helper-plugin';\nimport type { MessageDescriptor } from 'react-intl';\n\ninterface NonTranslatedTableHeader extends Omit<TableHeader, 'metadatas'> {\n  metadatas: Omit<TableHeader['metadatas'], 'label'> & {\n    label: MessageDescriptor;\n  };\n}\n\nexport const REVIEW_WORKFLOW_COLUMNS_EE = [\n  {\n    key: `__${STAGE_ATTRIBUTE_NAME}_temp_key__`,\n    name: STAGE_ATTRIBUTE_NAME,\n    fieldSchema: {\n      type: 'relation',\n      relation: 'oneToMany',\n      target: 'admin::review-workflow-stage',\n    },\n    metadatas: {\n      // formatMessage() will be applied when the column is rendered\n      label: {\n        id: getTranslation(`containers.ListPage.table-headers.reviewWorkflows.stage`),\n        defaultMessage: 'Review stage',\n      },\n      searchable: false,\n      sortable: true,\n      mainField: {\n        name: 'name',\n        type: 'string',\n      },\n    },\n  },\n  {\n    key: `__${ASSIGNEE_ATTRIBUTE_NAME}_temp_key__`,\n    name: ASSIGNEE_ATTRIBUTE_NAME,\n    fieldSchema: {\n      type: 'relation',\n      target: 'admin::user',\n      relation: 'oneToMany',\n    },\n    metadatas: {\n      label: {\n        id: getTranslation(`containers.ListPage.table-headers.reviewWorkflows.assignee`),\n        defaultMessage: 'Assignee',\n      },\n      searchable: false,\n      sortable: true,\n      mainField: {\n        name: 'firstname',\n        type: 'string',\n      },\n    },\n  },\n] satisfies NonTranslatedTableHeader[];\n\nexport const REVIEW_WORKFLOW_FILTERS = [\n  {\n    fieldSchema: {\n      type: 'relation',\n      mainField: {\n        name: 'name',\n\n        schema: {\n          type: 'string',\n        },\n      },\n    },\n\n    metadatas: {\n      customInput: StageFilter,\n\n      label: {\n        id: getTranslation(`containers.ListPage.table-headers.reviewWorkflows.stage`),\n        defaultMessage: 'Review stage',\n      },\n    },\n\n    name: 'strapi_stage',\n  },\n\n  {\n    fieldSchema: {\n      type: 'relation',\n      mainField: {\n        name: 'id',\n\n        schema: {\n          type: 'integer',\n        },\n      },\n    },\n\n    metadatas: {\n      customInput: AssigneeFilter,\n\n      customOperators: [\n        {\n          intlLabel: {\n            id: 'components.FilterOptions.FILTER_TYPES.$eq',\n            defaultMessage: 'is',\n          },\n          value: '$eq',\n        },\n        {\n          intlLabel: {\n            id: 'components.FilterOptions.FILTER_TYPES.$ne',\n            defaultMessage: 'is not',\n          },\n          value: '$ne',\n        },\n      ],\n\n      label: {\n        id: getTranslation(`containers.ListPage.table-headers.reviewWorkflows.assignee.label`),\n        defaultMessage: 'Assignee',\n      },\n    },\n\n    name: 'strapi_assignee',\n  },\n] satisfies Array<\n  Omit<FilterData, 'metadatas'> & {\n    metadatas: Omit<FilterData['metadatas'], 'label'> & {\n      label: MessageDescriptor;\n    };\n  }\n>;\n"],"names":["useIntl","useAdminUsers","jsx","Combobox","ComboboxOption","getDisplayName","useReviewWorkflows","SingleSelect","jsxs","Flex","Typography","Loader","getStageColorByHex","SingleSelectOption","STAGE_ATTRIBUTE_NAME","getTranslation","ASSIGNEE_ATTRIBUTE_NAME"],"mappings":"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"}