{"version":3,"file":"config-cQDYAnre.js","sources":["../../_internal/node/core/aliases.ts","../../_internal/node/core/monorepo.ts","../../_internal/node/core/config.ts"],"sourcesContent":["import path from 'node:path';\nimport { StrapiMonorepo } from './monorepo';\n\n/**\n * The path mappings/aliases used by various tools in the monorepo to map imported modules to\n * source files in order to speed up rebuilding and avoid having a separate watcher process to build\n * from `src` to `lib`.\n *\n * This file is currently read by:\n * - Webpack when running the dev server (only when running in this monorepo)\n */\nconst devAliases: Record<string, string> = {\n  '@strapi/admin/strapi-admin': './packages/core/admin/admin/src',\n  '@strapi/content-releases/strapi-admin': './packages/core/content-releases/admin/src',\n  '@strapi/plugin-content-type-builder/strapi-admin':\n    './packages/core/content-type-builder/admin/src',\n  '@strapi/plugin-email/strapi-admin': './packages/core/email/admin/src',\n  '@strapi/plugin-upload/strapi-admin': './packages/core/upload/admin/src',\n  '@strapi/plugin-color-picker/strapi-admin': './packages/plugins/color-picker/admin/src',\n  '@strapi/plugin-documentation/strapi-admin': './packages/plugins/documentation/admin/src',\n  '@strapi/plugin-graphql/strapi-admin': './packages/plugins/graphql/admin/src',\n  '@strapi/plugin-i18n/strapi-admin': './packages/plugins/i18n/admin/src',\n  '@strapi/plugin-sentry/strapi-admin': './packages/plugins/sentry/admin/src',\n  '@strapi/plugin-users-permissions/strapi-admin': './packages/plugins/users-permissions/admin/src',\n  '@strapi/helper-plugin': './packages/core/helper-plugin/src',\n};\n\nconst getMonorepoAliases = ({ monorepo }: { monorepo?: StrapiMonorepo }) => {\n  if (!monorepo?.path) {\n    return {};\n  }\n\n  return Object.fromEntries(\n    Object.entries(devAliases).map(([key, modulePath]) => {\n      return [key, path.join(monorepo.path, modulePath)];\n    })\n  );\n};\n\nexport { getMonorepoAliases };\n","import path from 'path';\nimport readPkgUp from 'read-pkg-up';\n\ninterface StrapiMonorepo {\n  path: string;\n}\n\n/**\n * Load information about the strapi CMS monorepo (if applicable)\n *\n * @internal\n */\nasync function loadStrapiMonorepo(cwd: string): Promise<StrapiMonorepo | undefined> {\n  let p = cwd;\n\n  while (p !== '/') {\n    const readResult = await readPkgUp({ cwd: p });\n\n    if (!readResult) {\n      return undefined;\n    }\n\n    if (readResult.packageJson.isStrapiMonorepo) {\n      return { path: path.dirname(readResult.path) };\n    }\n\n    p = path.dirname(path.dirname(readResult.path));\n  }\n\n  return undefined;\n}\n\nexport { loadStrapiMonorepo };\nexport type { StrapiMonorepo };\n","import path from 'node:path';\n\nimport type { BuildContext } from '../createBuildContext';\nimport { loadFile } from './files';\n\nconst getUserConfig = async <TConfig>(\n  fileNames: string[],\n  ctx: BuildContext\n): Promise<TConfig | undefined> => {\n  for (const file of fileNames) {\n    const filePath = path.join(ctx.appDir, 'src', 'admin', file);\n    const configFile = await loadFile(filePath);\n\n    if (configFile) {\n      return configFile;\n    }\n  }\n\n  return undefined;\n};\n\nexport { getUserConfig };\n"],"names":["path","readPkgUp","loadFile"],"mappings":";;;;;;;;;AAWA,MAAM,aAAqC;AAAA,EACzC,8BAA8B;AAAA,EAC9B,yCAAyC;AAAA,EACzC,oDACE;AAAA,EACF,qCAAqC;AAAA,EACrC,sCAAsC;AAAA,EACtC,4CAA4C;AAAA,EAC5C,6CAA6C;AAAA,EAC7C,uCAAuC;AAAA,EACvC,oCAAoC;AAAA,EACpC,sCAAsC;AAAA,EACtC,iDAAiD;AAAA,EACjD,yBAAyB;AAC3B;AAEA,MAAM,qBAAqB,CAAC,EAAE,eAA8C;AACtE,MAAA,CAAC,UAAU,MAAM;AACnB,WAAO;EACT;AAEA,SAAO,OAAO;AAAA,IACZ,OAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACpD,aAAO,CAAC,KAAKA,sBAAK,KAAK,SAAS,MAAM,UAAU,CAAC;AAAA,IAAA,CAClD;AAAA,EAAA;AAEL;ACzBA,eAAe,mBAAmB,KAAkD;AAClF,MAAI,IAAI;AAER,SAAO,MAAM,KAAK;AAChB,UAAM,aAAa,MAAMC,mBAAA,QAAU,EAAE,KAAK,EAAG,CAAA;AAE7C,QAAI,CAAC,YAAY;AACR,aAAA;AAAA,IACT;AAEI,QAAA,WAAW,YAAY,kBAAkB;AAC3C,aAAO,EAAE,MAAMD,gBAAA,QAAK,QAAQ,WAAW,IAAI;IAC7C;AAEA,QAAIA,wBAAK,QAAQA,gBAAAA,QAAK,QAAQ,WAAW,IAAI,CAAC;AAAA,EAChD;AAEO,SAAA;AACT;ACzBM,MAAA,gBAAgB,OACpB,WACA,QACiC;AACjC,aAAW,QAAQ,WAAW;AAC5B,UAAM,WAAWA,cAAK,QAAA,KAAK,IAAI,QAAQ,OAAO,SAAS,IAAI;AACrD,UAAA,aAAa,MAAME,eAAS,QAAQ;AAE1C,QAAI,YAAY;AACP,aAAA;AAAA,IACT;AAAA,EACF;AAEO,SAAA;AACT;;;;"}