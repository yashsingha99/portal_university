{"version":3,"file":"AdminSeatInfo-a41SMkE8.js","sources":["../../ee/admin/src/pages/SettingsPage/pages/ApplicationInfoPage/components/AdminSeatInfo.tsx"],"sourcesContent":["import { Flex, GridItem, Icon, Tooltip, Typography } from '@strapi/design-system';\nimport { Link } from '@strapi/design-system/v2';\nimport { pxToRem, useRBAC } from '@strapi/helper-plugin';\nimport { ExclamationMarkCircle, ExternalLink } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport { selectAdminPermissions } from '../../../../../../../../admin/src/selectors';\nimport { useLicenseLimits } from '../../../../../hooks/useLicenseLimits';\n\nconst BILLING_STRAPI_CLOUD_URL = 'https://cloud.strapi.io/profile/billing';\nconst BILLING_SELF_HOSTED_URL = 'https://strapi.io/billing/request-seats';\n\nexport const AdminSeatInfoEE = () => {\n  const { formatMessage } = useIntl();\n  const { settings } = useSelector(selectAdminPermissions);\n  const {\n    isLoading: isRBACLoading,\n    allowedActions: { canRead, canCreate, canUpdate, canDelete },\n  } = useRBAC(settings?.users ?? {});\n  const {\n    license,\n    isError,\n    isLoading: isLicenseLoading,\n  } = useLicenseLimits({\n    // TODO: this creates a waterfall which we should avoid to render earlier, but for that\n    // we will have to move away from data-fetching hooks to query functions.\n    // Short-term we could at least implement a loader, for the user to have visual feedback\n    // in case the requests take a while\n    enabled: !isRBACLoading && canRead && canCreate && canUpdate && canDelete,\n  });\n\n  const isLoading = isRBACLoading || isLicenseLoading;\n\n  if (isError || isLoading || !license) {\n    return null;\n  }\n\n  const { licenseLimitStatus, enforcementUserCount, permittedSeats, isHostedOnStrapiCloud } =\n    license;\n\n  if (!permittedSeats) {\n    return null;\n  }\n\n  return (\n    <GridItem col={6} s={12}>\n      <Typography variant=\"sigma\" textColor=\"neutral600\">\n        {formatMessage({\n          id: 'Settings.application.admin-seats',\n          defaultMessage: 'Admin seats',\n        })}\n      </Typography>\n      <Flex gap={2}>\n        <Flex>\n          <Typography as=\"p\">\n            {formatMessage(\n              {\n                id: 'Settings.application.ee.admin-seats.count',\n                defaultMessage: '<text>{enforcementUserCount}</text>/{permittedSeats}',\n              },\n              {\n                permittedSeats,\n                enforcementUserCount,\n                text: (chunks) =>\n                  (\n                    <Typography\n                      fontWeight=\"semiBold\"\n                      textColor={enforcementUserCount > permittedSeats ? 'danger500' : undefined}\n                    >\n                      {chunks}\n                    </Typography>\n                  ) as any,\n              }\n            )}\n          </Typography>\n        </Flex>\n        {licenseLimitStatus === 'OVER_LIMIT' && (\n          <Tooltip\n            description={formatMessage({\n              id: 'Settings.application.ee.admin-seats.at-limit-tooltip',\n              defaultMessage: 'At limit: add seats to invite more users',\n            })}\n          >\n            <Icon\n              width={pxToRem(14)}\n              height={pxToRem(14)}\n              color=\"danger500\"\n              as={ExclamationMarkCircle}\n            />\n          </Tooltip>\n        )}\n      </Flex>\n      <Link\n        href={isHostedOnStrapiCloud ? BILLING_STRAPI_CLOUD_URL : BILLING_SELF_HOSTED_URL}\n        isExternal\n        endIcon={<ExternalLink />}\n      >\n        {formatMessage(\n          {\n            id: 'Settings.application.ee.admin-seats.add-seats',\n            defaultMessage:\n              '{isHostedOnStrapiCloud, select, true {Add seats} other {Contact sales}}',\n          },\n          { isHostedOnStrapiCloud }\n        )}\n      </Link>\n    </GridItem>\n  );\n};\n"],"names":["useIntl","useSelector","selectAdminPermissions","useRBAC","useLicenseLimits","jsxs","GridItem","jsx","Typography","Flex","Tooltip","Icon","pxToRem","ExclamationMarkCircle","Link","ExternalLink"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,MAAM,2BAA2B;AACjC,MAAM,0BAA0B;AAEzB,MAAM,kBAAkB,MAAM;AAC7B,QAAA,EAAE,kBAAkBA,UAAAA;AAC1B,QAAM,EAAE,SAAA,IAAaC,WAAA,YAAYC,iBAAsB,sBAAA;AACjD,QAAA;AAAA,IACJ,WAAW;AAAA,IACX,gBAAgB,EAAE,SAAS,WAAW,WAAW,UAAU;AAAA,EACzD,IAAAC,qBAAQ,UAAU,SAAS,CAAE,CAAA;AAC3B,QAAA;AAAA,IACJ;AAAA,IACA;AAAA,IACA,WAAW;AAAA,MACTC,uBAAiB;AAAA;AAAA;AAAA;AAAA;AAAA,IAKnB,SAAS,CAAC,iBAAiB,WAAW,aAAa,aAAa;AAAA,EAAA,CACjE;AAED,QAAM,YAAY,iBAAiB;AAE/B,MAAA,WAAW,aAAa,CAAC,SAAS;AAC7B,WAAA;AAAA,EACT;AAEA,QAAM,EAAE,oBAAoB,sBAAsB,gBAAgB,0BAChE;AAEF,MAAI,CAAC,gBAAgB;AACZ,WAAA;AAAA,EACT;AAEA,SACGC,2BAAAA,KAAAC,aAAAA,UAAA,EAAS,KAAK,GAAG,GAAG,IACnB,UAAA;AAAA,IAAAC,+BAACC,aAAAA,YAAW,EAAA,SAAQ,SAAQ,WAAU,cACnC,UAAc,cAAA;AAAA,MACb,IAAI;AAAA,MACJ,gBAAgB;AAAA,IACjB,CAAA,GACH;AAAA,IACAH,2BAAAA,KAACI,aAAAA,MAAK,EAAA,KAAK,GACT,UAAA;AAAA,MAAAF,+BAACE,aAAAA,MACC,EAAA,UAAAF,2BAAA,IAACC,aAAW,YAAA,EAAA,IAAG,KACZ,UAAA;AAAA,QACC;AAAA,UACE,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB;AAAA,QACA;AAAA,UACE;AAAA,UACA;AAAA,UACA,MAAM,CAAC,WAEHD,2BAAA;AAAA,YAACC,aAAA;AAAA,YAAA;AAAA,cACC,YAAW;AAAA,cACX,WAAW,uBAAuB,iBAAiB,cAAc;AAAA,cAEhE,UAAA;AAAA,YAAA;AAAA,UACH;AAAA,QAEN;AAAA,SAEJ,EACF,CAAA;AAAA,MACC,uBAAuB,gBACtBD,2BAAA;AAAA,QAACG,aAAA;AAAA,QAAA;AAAA,UACC,aAAa,cAAc;AAAA,YACzB,IAAI;AAAA,YACJ,gBAAgB;AAAA,UAAA,CACjB;AAAA,UAED,UAAAH,2BAAA;AAAA,YAACI,aAAA;AAAA,YAAA;AAAA,cACC,OAAOC,qBAAQ,EAAE;AAAA,cACjB,QAAQA,qBAAQ,EAAE;AAAA,cAClB,OAAM;AAAA,cACN,IAAIC,MAAA;AAAA,YAAA;AAAA,UACN;AAAA,QAAA;AAAA,MACF;AAAA,IAAA,GAEJ;AAAA,IACAN,2BAAA;AAAA,MAACO,GAAA;AAAA,MAAA;AAAA,QACC,MAAM,wBAAwB,2BAA2B;AAAA,QACzD,YAAU;AAAA,QACV,wCAAUC,MAAa,cAAA,EAAA;AAAA,QAEtB,UAAA;AAAA,UACC;AAAA,YACE,IAAI;AAAA,YACJ,gBACE;AAAA,UACJ;AAAA,UACA,EAAE,sBAAsB;AAAA,QAC1B;AAAA,MAAA;AAAA,IACF;AAAA,EACF,EAAA,CAAA;AAEJ;;"}